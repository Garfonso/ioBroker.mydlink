{
  "version": 3,
  "sources": ["../../src/lib/soapclient.ts"],
  "sourcesContent": ["/*\r\n    Mostly based on the work of bikerp, see: https://github.com/bikerp/dsp-w215-hnap\r\n    Modifications to fit newer firmware and be used as library by Garfonso.\r\n\r\n    Control of Sirens possible because of mtfluds work here: https://github.com/mtflud/DCH-S220-Web-Control\r\n\r\n    The MIT License (MIT)\r\n\r\n    Copyright (c) 2015 bikerp\r\n\r\n    Permission is hereby granted, free of charge, to any person obtaining a copy\r\n    of this software and associated documentation files (the \"Software\"), to deal\r\n    in the Software without restriction, including without limitation the rights\r\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n    copies of the Software, and to permit persons to whom the Software is\r\n    furnished to do so, subject to the following conditions:\r\n\r\n    The above copyright notice and this permission notice shall be included in all\r\n    copies or substantial portions of the Software.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n    SOFTWARE.\r\n*/\r\n\r\nimport * as crypto from 'crypto';\r\nimport axios from 'axios';\r\nimport {DOMParser} from '@xmldom/xmldom';\r\nimport http from 'http';\r\n\r\nconst HNAP1_XMLNS = 'http://purenetworks.com/HNAP1/';\r\n//const HNAP_METHOD = 'POST';\r\n//const HNAP_BODY_ENCODING = 'UTF8';\r\nconst HNAP_LOGIN_METHOD = 'Login';\r\n\r\nclass HNAP_ERROR extends Error {\r\n    errno: number;\r\n    code: number;\r\n    body: string;\r\n    constructor(message: string, errno : number, body: string, code = -1) {\r\n        super(message);\r\n        this.errno = errno;\r\n        this.code = code >= 0 ? code : errno;\r\n        this.body = body;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Creates a soapClient.\r\n * @param opt - parameters, must have url, user and password.\r\n */\r\nexport const soapClient = function (opt = { url: '', user: '', password: ''}) {\r\n    const HNAP_AUTH = {\r\n        url: opt.url || '',\r\n        user: opt.user || '',\r\n        pwd: opt.password || '',\r\n        result: '',\r\n        challenge: '',\r\n        publicKey: '',\r\n        cookie: '',\r\n        privateKey: ''\r\n    };\r\n    //console.debug('New Soapclient with options ', opt);\r\n\r\n    const agent = new http.Agent({\r\n        keepAlive: true,\r\n        //maxSockets: 1,\r\n        keepAliveMsecs: 60000,\r\n        timeout: 10000\r\n    });\r\n\r\n    //extract tokens from login response into HNAP_AUTH object\r\n    function save_login_result(body : string) : void {\r\n        const doc = new DOMParser().parseFromString(body);\r\n        if (doc) {\r\n            HNAP_AUTH.result = doc.getElementsByTagName(HNAP_LOGIN_METHOD + 'Result')!.item(0)!.firstChild!.nodeValue!;\r\n            HNAP_AUTH.challenge = doc.getElementsByTagName('Challenge')!.item(0)!.firstChild!.nodeValue!;\r\n            HNAP_AUTH.publicKey = doc.getElementsByTagName('PublicKey')!.item(0)!.firstChild!.nodeValue!;\r\n            HNAP_AUTH.cookie = doc.getElementsByTagName('Cookie')!.item(0)!.firstChild!.nodeValue!;\r\n            HNAP_AUTH.privateKey = crypto.createHmac('md5', HNAP_AUTH.publicKey + HNAP_AUTH.pwd).update(HNAP_AUTH.challenge).digest('hex');\r\n\r\n            console.log(HNAP_AUTH);\r\n            //TODO: is that the same as:?\r\n            //md5.hex_hmac_md5(HNAP_AUTH.publicKey + HNAP_AUTH.pwd, HNAP_AUTH.challenge).toUpperCase();\r\n        }\r\n    }\r\n\r\n    function loginRequest() : string {\r\n        return '<Action>request</Action>'\r\n            + '<Username>' + HNAP_AUTH.user + '</Username>'\r\n            + '<LoginPassword></LoginPassword>'\r\n            + '<Captcha></Captcha>';\r\n    }\r\n\r\n    function loginParameters() : string {\r\n        //const login_pwd = md5.hex_hmac_md5(HNAP_AUTH.privateKey, HNAP_AUTH.challenge); //TODO: is this the same?\r\n        const login_pwd = crypto.createHmac('md5', HNAP_AUTH.privateKey).update(HNAP_AUTH.challenge).digest('hex');\r\n        return '<Action>login</Action>'\r\n            + '<Username>' + HNAP_AUTH.user + '</Username>'\r\n            + '<LoginPassword>' + login_pwd.toUpperCase() + '</LoginPassword>'\r\n            + '<Captcha></Captcha>';\r\n    }\r\n\r\n    function requestBody(method : string, parameters : string) : string {\r\n        return '<?xml version=\"1.0\" encoding=\"utf-8\"?>' +\r\n            '<soap:Envelope ' +\r\n            'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ' +\r\n            'xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" ' +\r\n            'xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">' +\r\n            '<soap:Body>' +\r\n            '<' + method + ' xmlns=\"' + HNAP1_XMLNS + '\">' +\r\n            parameters +\r\n            '</' + method + '>' +\r\n            '</soap:Body></soap:Envelope>';\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param method\r\n     * @param responseElement\r\n     * @param body\r\n     * @param {boolean} [fullBody] if true will return fullBody xml instead of only result value.\r\n     * @returns {Promise<any>}\r\n     */\r\n    function soapAction(method : string, responseElement : string | Array<string>, body : string, fullBody = false) : Promise<string | number | boolean | Array<string> | Record<string, string>> {\r\n        //console.log('Sending Body ' + body);\r\n        return axios.post(HNAP_AUTH.url, body,\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'text/xml; charset=utf-8',\r\n                    'SOAPAction': '\"' + HNAP1_XMLNS + method + '\"',\r\n                    'HNAP_AUTH': getHnapAuth('\"' + HNAP1_XMLNS + method + '\"', HNAP_AUTH.privateKey),\r\n                    'cookie': 'uid=' + HNAP_AUTH.cookie\r\n                },\r\n                timeout: 10000, //timeout in ms\r\n                httpAgent: agent\r\n            }).then(function (response) {\r\n            const incomingBody = response.data;\r\n            if (response.status === 403) {\r\n                throw new HNAP_ERROR('Unauthorized, need to login.', 403, incomingBody);\r\n            }\r\n            console.debug('StatusCode: ' + response.status + ' Body: ' + incomingBody);\r\n            if (fullBody) { //return full body if requested.\r\n                return incomingBody;\r\n            }\r\n            const result = readResponseValue(incomingBody, method + 'Result');\r\n            if (typeof result === 'string' && result.toUpperCase() === 'ERROR') {\r\n                throw new HNAP_ERROR(\r\n                    'Request not successful. Probably need to login again. Status: ' + response.status,\r\n                    response.status, incomingBody, response.status < 300 ? 403 : response.status);\r\n            }\r\n            return readResponseValue(incomingBody, responseElement);\r\n        }).catch(function (err) {\r\n            console.log('error during soapaction:', err);\r\n            throw err;\r\n        });\r\n    }\r\n\r\n    function moduleParameters(module : string | number) : string {\r\n        return '<ModuleID>' + module + '</ModuleID>';\r\n    }\r\n\r\n    function controlParameters(module : string | number, status : string | boolean) : string {\r\n        return moduleParameters(module) +\r\n            '<NickName>Socket 1</NickName><Description>Socket 1</Description>' +\r\n            '<OPStatus>' + status + '</OPStatus><Controller>1</Controller>';\r\n    }\r\n\r\n    function radioParameters(radio : string) : string {\r\n        return '<RadioID>' + radio + '</RadioID>';\r\n    }\r\n\r\n    /**\r\n     * Returns an Object of possible sounds with LABELS and the numbers they translate in.\r\n     * @returns {{EMERGENCY: number, DOOR_CHIME: number, BEEP: number, AMBULANCE: number, FIRE: number, POLICE: number}}\r\n     */\r\n    function getSounds() : {EMERGENCY: number, DOOR_CHIME: number, BEEP: number, AMBULANCE: number, FIRE: number, POLICE: number} {\r\n        return {\r\n            EMERGENCY: 1,\r\n            FIRE: 2,\r\n            AMBULANCE: 3,\r\n            POLICE: 4,\r\n            DOOR_CHIME: 5,\r\n            BEEP: 6\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Create parameters for SetPlaySound request\r\n     * @param [soundnum] should be one of the string from getSounds 1-6\r\n     * @param [volume] 1-100\r\n     * @param [duration] 1-88888 (with 88888 = infinite)\r\n     * @returns {string}\r\n     */\r\n    function soundParameters(soundnum? : number, volume? : number, duration? : number) : string {\r\n        let params = `<ModuleID>1</ModuleID>\r\n                     <Controller>1</Controller>`;\r\n        if (soundnum !== undefined) {\r\n            params += `<SoundType>${soundnum}</SoundType>`;\r\n        }\r\n        if (volume !== undefined) {\r\n            params += `<Volume>${volume}</Volume>`;\r\n        }\r\n        if (duration !== undefined) {\r\n            params += `<Duration>${duration}</Duration>`;\r\n        }\r\n        return params;\r\n    }\r\n\r\n    function APClientParameters() : string {\r\n        return '<Enabled>true</Enabled>' +\r\n            '<RadioID>RADIO_2.4GHz</RadioID>' +\r\n            '<SSID>My_Network</SSID>' +\r\n            '<MacAddress>XX:XX:XX:XX:XX:XX</MacAddress>' +\r\n            '<ChannelWidth>0</ChannelWidth>' +\r\n            '<SupportedSecurity>' +\r\n            '<SecurityInfo>' +\r\n            '<SecurityType>WPA2-PSK</SecurityType>' +\r\n            '<Encryptions>' +\r\n            '<string>AES</string>' +\r\n            '</Encryptions>' +\r\n            '</SecurityInfo>' +\r\n            '</SupportedSecurity>' +\r\n            '';//'<Key>' + AES.AES_Encrypt128('password', HNAP_AUTH.privateKey) + '</Key>'; //TODO: commented out.. do I need that at all??\r\n    }\r\n\r\n    function groupParameters(group : string | number) : string {\r\n        return '<ModuleGroupID>' + group + '</ModuleGroupID>';\r\n    }\r\n    function temperatureSettingsParameters(module : string | number) : string {\r\n        return moduleParameters(module) +\r\n            '<NickName>TemperatureMonitor 3</NickName>' +\r\n            '<Description>Temperature Monitor 3</Description>' +\r\n            '<UpperBound>80</UpperBound>' +\r\n            '<LowerBound>Not Available</LowerBound>' +\r\n            '<OPStatus>true</OPStatus>';\r\n    }\r\n    function powerWarningParameters() : string {\r\n        return '<Threshold>28</Threshold>' +\r\n            '<Percentage>70</Percentage>' +\r\n            '<PeriodicType>Weekly</PeriodicType>' +\r\n            '<StartTime>1</StartTime>';\r\n    }\r\n\r\n    function getHnapAuth(SoapAction : string, privateKey : string) : string {\r\n        const current_time = new Date();\r\n        const time_stamp = Math.round(current_time.getTime() / 1000);\r\n        const auth = crypto.createHmac('md5', privateKey).update(time_stamp + SoapAction).digest('hex');\r\n        //const auth = md5.hex_hmac_md5(privateKey, time_stamp + SoapAction); //TODO is this the same?\r\n        return auth.toUpperCase() + ' ' + time_stamp;\r\n    }\r\n\r\n    function readResponseValue(body : string, elementName : string | Array<string>) : string | number | boolean | Array<string> | Record<string, string> | undefined {\r\n        if (typeof elementName === 'object' && typeof elementName.forEach === 'function') { //sloppy isArray check.\r\n            const results = {} as Record<string, string>;\r\n            elementName.forEach(function (elemName : string): void {\r\n                results[elemName] = readResponseValue(body, elemName) as string;\r\n            });\r\n            return results;\r\n        } else {\r\n            if (body && elementName && typeof elementName === 'string') {\r\n                const doc = new DOMParser().parseFromString(body);\r\n                const node = doc.getElementsByTagName(elementName).item(0);\r\n                // Check that we have children of node.\r\n                //if (elementName === 'ModuleTypes') {\r\n                //    console.debug('node: ', node, ' firstChild: ', node.firstChild, ' nodeValue: ', node.firstChild.nodeValue);\r\n                //    console.debug('Content: ', node.textContent);\r\n                //}\r\n                const result = (node && node.firstChild) ? node.firstChild.nodeValue : 'ERROR';\r\n                if (result === null) { //array of values requested like Module Types or SOAP Actions:\r\n                    const results = [] as Array<string>;\r\n                    //console.debug('Have array:', node);\r\n                    Object.keys(node!.childNodes).forEach(function (value : string, key : number) {\r\n                        const child = node!.childNodes[key];\r\n                        //console.debug('Child:', child);\r\n                        if (child && child.firstChild) {\r\n                            results.push(child.firstChild.nodeValue as string);\r\n                        }\r\n                    });\r\n                    return results;\r\n                } else {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function login() : Promise<boolean> {\r\n        //console.log('Sending Body ' + loginRequest());\r\n        return axios.post(HNAP_AUTH.url,\r\n            requestBody(HNAP_LOGIN_METHOD, loginRequest()),\r\n            { //first request challenge and stuff\r\n                headers: {\r\n                    'Content-Type': 'text/xml; charset=utf-8',\r\n                    'SOAPAction': '\"' + HNAP1_XMLNS + HNAP_LOGIN_METHOD + '\"',\r\n                    'connection': 'keep-alive'\r\n                },\r\n                timeout: 10000,\r\n                httpAgent: agent\r\n            }).then(function (response) { //then log in with the information gathered in first request\r\n            //save keys.\r\n            //console.log('Login request came back: ', response);\r\n            //console.log('Body: ', response.data);\r\n            save_login_result(response.data);\r\n            //console.log('Got results: ', HNAP_AUTH);\r\n            //will return 'success' if worked.\r\n            return soapAction(HNAP_LOGIN_METHOD, 'LoginResult',\r\n                requestBody(HNAP_LOGIN_METHOD, loginParameters()));\r\n        }).then((result) => {\r\n            return result === 'success';\r\n        }).catch(function (err) {\r\n            //throw error here, so we can react to it outside (?)\r\n            console.log('error during HNAP login:', err);\r\n            throw err;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get full device description XMLs -> used to support new devices.\r\n     * @returns {Promise<unknown>}\r\n     */\r\n    async function getDeviceDescriptionXML() : Promise<{deviceSettingsXML: string, modulesSoapActions: string}> {\r\n        return {\r\n            deviceSettingsXML: await soapAction('GetDeviceSettings',\r\n                'Result',\r\n                requestBody('GetDeviceSettings', ''), true) as string,\r\n            modulesSoapActions: await soapAction('GetModuleSOAPActions',\r\n                'SOAPActions',\r\n                requestBody('GetModuleSOAPActions', moduleParameters('0')), true) as string\r\n        }; //get full body of DeviceSettings\r\n    }\r\n\r\n    //API:\r\n    return {\r\n        login: login,\r\n\r\n        disconnect: function () {\r\n            agent.destroy();\r\n        },\r\n\r\n        /**\r\n         * Switches Plug\r\n         * @param {boolean} on target status\r\n         * @returns {Promise<*>}\r\n         */\r\n        switch: function (on : boolean) {\r\n            return soapAction('SetSocketSettings', 'SetSocketSettingsResult', requestBody('SetSocketSettings', controlParameters(1, on)));\r\n        },\r\n\r\n        //switches plug on\r\n        on: function () {\r\n            return soapAction('SetSocketSettings', 'SetSocketSettingsResult', requestBody('SetSocketSettings', controlParameters(1, true)));\r\n        },\r\n\r\n        //switches plug off\r\n        off: function () {\r\n            return soapAction('SetSocketSettings', 'SetSocketSettingsResult', requestBody('SetSocketSettings', controlParameters(1, false)));\r\n        },\r\n\r\n        //polls current state\r\n        state: function () {\r\n            return soapAction('GetSocketSettings', 'OPStatus', requestBody('GetSocketSettings', moduleParameters(1)));\r\n        },\r\n\r\n        //polls last detection\r\n        lastDetection: async function () {\r\n            const result = await soapAction('GetLatestDetection', 'LatestDetectTime', requestBody('GetLatestDetection', moduleParameters(1))) as number;\r\n            return result * 1000;\r\n        },\r\n\r\n        //polls power consumption\r\n        consumption: function () {\r\n            return soapAction('GetCurrentPowerConsumption', 'CurrentConsumption', requestBody('GetCurrentPowerConsumption', moduleParameters(2))) as Promise<number>;\r\n        },\r\n\r\n        //polls total power consumption\r\n        totalConsumption: function () {\r\n            return soapAction('GetPMWarningThreshold', 'TotalConsumption', requestBody('GetPMWarningThreshold', moduleParameters(2))) as Promise<number>;\r\n        },\r\n\r\n        //polls current temperature\r\n        temperature: function () {\r\n            return soapAction('GetCurrentTemperature', 'CurrentTemperature', requestBody('GetCurrentTemperature', moduleParameters(3))) as Promise<number>;\r\n        },\r\n\r\n        //gets information about Wi-Fi\r\n        getAPClientSettings: function () {\r\n            return soapAction('GetAPClientSettings', 'GetAPClientSettingsResult', requestBody('GetAPClientSettings', radioParameters('RADIO_2.4GHz')));\r\n        },\r\n\r\n        //set power warning?\r\n        setPowerWarning: function () {\r\n            return soapAction('SetPMWarningThreshold', 'SetPMWarningThresholdResult', requestBody('SetPMWarningThreshold', powerWarningParameters()));\r\n        },\r\n\r\n        //poll power warning\r\n        getPowerWarning: function () {\r\n            return soapAction('GetPMWarningThreshold', 'GetPMWarningThresholdResult', requestBody('GetPMWarningThreshold', moduleParameters(2)));\r\n        },\r\n\r\n        //returns model name and firmware version. Could be very interesting for supporting additional devices.\r\n        //also useful to know which states to create for a device (i.e. plug or motion detection)\r\n        getDeviceSettings: function () : Promise<Record<string, string>> {\r\n            return soapAction('GetDeviceSettings',\r\n                [\r\n                    'GetDeviceSettingsResult',\r\n                    'DeviceMacId',\r\n                    'ModelName',\r\n                    'ModelDescription',\r\n                    'HardwareVersion',\r\n                    'FirmwareVersion',\r\n                    'PresentationURL',\r\n                    'ModuleTypes' //not yet helpfully implemented. Hm\r\n                ],\r\n                requestBody('GetDeviceSettings', '')) as Promise<Record<string, string>>;\r\n        },\r\n\r\n        //not very interesting, returns timezone and set locale.\r\n        getDeviceSettings2: function () {\r\n            return soapAction('GetDeviceSettings2', 'GetDeviceSettings2Result', requestBody('GetDeviceSettings2', ''));\r\n        },\r\n\r\n        getTemperatureSettings: function () {\r\n            return soapAction('GetTempMonitorSettings', 'GetTempMonitorSettingsResult', requestBody('GetTempMonitorSettings', moduleParameters(3)));\r\n        },\r\n\r\n        setTemperatureSettings: function () {\r\n            return soapAction('SetTempMonitorSettings', 'SetTempMonitorSettingsResult', requestBody('SetTempMonitorSettings', temperatureSettingsParameters(3)));\r\n        },\r\n\r\n        getSiteSurvey: function () {\r\n            return soapAction('GetSiteSurvey', 'GetSiteSurveyResult', requestBody('GetSiteSurvey', radioParameters('RADIO_2.4GHz')));\r\n        },\r\n\r\n        triggerWirelessSiteSurvey: function () {\r\n            return soapAction('SetTriggerWirelessSiteSurvey', 'SetTriggerWirelessSiteSurveyResult', requestBody('SetTriggerWirelessSiteSurvey', radioParameters('RADIO_2.4GHz')));\r\n        },\r\n\r\n        latestDetection: function () {\r\n            return soapAction('GetLatestDetection', 'GetLatestDetectionResult', requestBody('GetLatestDetection', moduleParameters(2)));\r\n        },\r\n\r\n        //reboot device\r\n        reboot: function () {\r\n            return soapAction('Reboot', 'RebootResult', requestBody('Reboot', ''));\r\n        },\r\n\r\n        /**\r\n         * Returns true if device is ready.\r\n         * @returns {Promise<boolean>}\r\n         */\r\n        isDeviceReady: async function () {\r\n            const result = await soapAction('IsDeviceReady', 'IsDeviceReadyResult', requestBody('IsDeviceReady', ''));\r\n            return result === 'OK';\r\n        },\r\n\r\n        getModuleSchedule: function () {\r\n            return soapAction('GetModuleSchedule', 'GetModuleScheduleResult', requestBody('GetModuleSchedule', moduleParameters(0)));\r\n        },\r\n\r\n        getModuleEnabled: function () {\r\n            return soapAction('GetModuleEnabled', 'GetModuleEnabledResult', requestBody('GetModuleEnabled', moduleParameters(0)));\r\n        },\r\n\r\n        getModuleGroup: function () {\r\n            return soapAction('GetModuleGroup', 'GetModuleGroupResult', requestBody('GetModuleGroup', groupParameters(0)));\r\n        },\r\n\r\n        //get actions supported by module\r\n        getModuleSOAPActions: function (module = 0) {\r\n            return soapAction('GetModuleSOAPActions', 'SOAPActions', requestBody('GetModuleSOAPActions', moduleParameters(module)));\r\n        },\r\n\r\n        getMotionDetectorSettings: function(module = 1) {\r\n            return soapAction('GetMotionDetectorSettings', 'GetMotionDetectorSettingsResult', requestBody('GetMotionDetectorSettings', moduleParameters(module)));\r\n        },\r\n\r\n        getScheduleSettings: function () {\r\n            return soapAction('GetScheduleSettings', 'GetScheduleSettingsResult', requestBody('GetScheduleSettings', ''));\r\n        },\r\n\r\n        setFactoryDefault: function () {\r\n            return soapAction('SetFactoryDefault', 'SetFactoryDefaultResult', requestBody('SetFactoryDefault', ''));\r\n        },\r\n\r\n        getWLanRadios: function () {\r\n            return soapAction('GetWLanRadios', 'GetWLanRadiosResult', requestBody('GetWLanRadios', ''));\r\n        },\r\n\r\n        getInternetSettings: function () {\r\n            return soapAction('GetInternetSettings', 'GetInternetSettingsResult', requestBody('GetInternetSettings', ''));\r\n        },\r\n\r\n        setAPClientSettings: function () {\r\n            return soapAction('SetAPClientSettings', 'SetAPClientSettingsResult', requestBody('SetAPClientSettings', APClientParameters()));\r\n        },\r\n\r\n        settriggerADIC: function () {\r\n            return soapAction('SettriggerADIC', 'SettriggerADICResult', requestBody('SettriggerADIC', ''));\r\n        },\r\n\r\n        setSoundPlay: function (sound : number, volume : number, duration : number) {\r\n            return soapAction('SetSoundPlay', 'SetSoundPlayResult', requestBody('SetSoundPlay', soundParameters(sound, volume, duration)));\r\n        },\r\n\r\n        setAlarmDismissed: function () {\r\n            return soapAction('SetAlarmDismissed', 'SetAlarmDismissedResult', requestBody('SetAlarmDismissed', soundParameters()));\r\n        },\r\n\r\n        getSoundPlay: function () {\r\n            return soapAction('GetSirenAlarmSettings', 'IsSounding', requestBody('GetSirenAlarmSettings', soundParameters()));\r\n        },\r\n\r\n        getDeviceDescriptionXML: getDeviceDescriptionXML,\r\n\r\n        getSounds: getSounds\r\n    };\r\n};\r\n\r\nexport default soapClient;\r\n\r\n"],
  "mappings": "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",
  "names": ["http", "axios", "module"]
}
